<!DOCTYPE html>
<html>
  <head>

    <title>{{title}}</title>

    <link rel='stylesheet' href='/stylesheets/matches.css' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato">
    <script src = "/javascripts/matches.js"></script>
    <script type = "text/javascript">

   

    </script>
  </head>


  <body class = 'closer'>

    <!--navigation bar, now includes link to user's personalized profile -->

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
         <div class = "head"> <a class="navbar-brand " href="/"> CLOSER </a> </div>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            <li><a href = "/userview/{{username}}"> {{username}}'s Profile </a><li>
            <li><a href="/search">Search</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/logout">Logout</a></li>

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <!--rendering top 5 users in array upon sign in -->
    {{#each users}}
    <ul class = "userlist">
        <li>{{first}}</li>
        <li>{{last}}</li>
        <li> {{college}}</li>
        <li> {{courses}}</li>


        <!-- MODAL FOR VIEWING FULL USER PROFILE VIA POPUP -->
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#{{getIndex @index}}">
          View full profile
        </button>

        <!-- Modal -->
        <div class="modal fade" id={{getIndex @index}} tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">{{first}} {{last}}</h4>
              </div>
              <div class="modal-body">
                <p>{{first}} {{last}}</p>
                <p> {{college}}</p>
                <p> {{courses}}</p>
                <p> {{bio}} </p>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>


        <!-- MODAL FOR INVITING USER TO AN EXISTING GROUP -->
        <button type = "button" class = "btn btn-default" data-toggle = "modal" data-target= "#addgroup{{getIndex @index}}" > Invite to Existing Group </button>



          <div class="modal fade" id="addgroup{{getIndex @index}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Which group do you want to invite to?</h4>
              </div>
              <div class="modal-body">
                {{#each ../groups}}
                  <button type="button" class="btn btn-default">{{groupName}}</button>
                {{/each}}
              </div>
              <div class="modal-footer">
                <div class=" text-center">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <input type="submit" class="btn btn-default btn-login-submit col-md-6" value="Invite" />
                        <div class = "row"></div>
                  </div>
              </div>
            </div>
          </div>
        </div>




         <button type = "button" class = "btn btn-default" data-toggle = "modal" data-target= "#creategroup{{getIndex @index}}" > Invite to New Group </button>





           <div class="modal fade" id="creategroup{{getIndex @index}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Create a new group</h4>
              </div>
              <div class="modal-body">
                <form action="/creategroup" method = "post" id = "create-group" >
                    <div class="form-group">
                        <label for="username-email">Group Name</label>
                        <input value='' name = "username" id="username-email" placeholder="Group name" type="text" class="form-control" required />
                    </div>
                    <div class="form-group">
                        <label for="username-email">Subject/Class (optional)</label>
                        <input value='' name = "username" id="username-email" placeholder="Subject" type="text" class="form-control"  />
                    </div>
                    
                    <div class="form-group text-center">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <input type="submit" class="btn btn-default btn-login-submit col-md-6" value="Create" />
                        <div class = "row"></div>
                    </div>
                    
                </form>


              </div>
              <div class="modal-footer">
                
              </div>
            </div>
          </div>
        </div>




        <button onclick = "/removeUser/{{getIndex @index}}" > Not Interested </button>












      </ul>
    {{/each}}

    <div class = "col-md-3"></div>
    <!--allows for showing next 5 or previous 5 matches -->
    <button class = "prev col-md-3" onclick = "window.location.href='/previous'"> Previous </button>
    <button class = "next col-md-3" onclick = "window.location.href='/next'"> Next </button>

     <div class = "col-md-3"></div>
    


  </body>
</html>